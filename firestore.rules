/**
 * @fileoverview Firestore Security Rules for Ye-Games application.
 *
 * Core Philosophy:
 * This ruleset prioritizes security and data access control. It defines access rules for games, tags, and analytics data.
 *
 * Data Structure:
 * - /games/{gameId}: Stores individual game documents.
 * - /tags/{tagId}: Stores individual tag documents.
 * - /analytics/live-stats: Stores live analytics data.
 *
 * Key Security Decisions:
 * - Analytics data is publicly readable to allow for general insights.
 * - Write operations are disallowed on analytics in this prototype phase.
 *
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Grants read access to all users for game documents. Enforces owner-only for write access.
     * @path /games/{gameId}
     * @allow (get, list): Any user can read game data.
     * @deny (create, update, delete): No user can modify game data.
     * @principle Public read, owner-only writes (not implemented yet).
     */
    match /games/{gameId} {
      allow get, list: if true;
      allow create, update, delete: if false; // TODO: Add owner validation once the schema is updated with an ownership field.
    }

    /**
     * @description Grants read access to all users for tag documents. Enforces owner-only for write access.
     * @path /tags/{tagId}
     * @allow (get, list): Any user can read tag data.
     * @deny (create, update, delete): No user can modify tag data.
     * @principle Public read, owner-only writes (not implemented yet).
     */
    match /tags/{tagId} {
      allow get, list: if true;
      allow create, update, delete: if false; // TODO: Add owner validation once the schema is updated with an ownership field.
    }

    /**
     * @description Grants read access to all users for the live-stats document. Write operations are disallowed.
     * @path /analytics/live-stats
     * @allow (get, list): Any user can read the analytics data.
     * @deny (create, update, delete): No user can modify analytics data.
     * @principle Public read, no writes.
     */
    match /analytics/live-stats {
      allow get: if true;
      allow list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}